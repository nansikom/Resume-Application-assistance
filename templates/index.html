
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> ðŸ¤–JOB AND RESUME MATCHER</title>

        <style>
            button {
                color:slateblue;
                padding: 30px 30px;
                border-radius: 8px;
                font-size:16px;
                cursor:pointer;
                background-color: whitesmoke;
            }
            body{
              
                background-color:#4A90E2;
                color: black;

                
            }
            #displayText {
                color:yellowgreen
            }
           
            textarea{
                background-color:whitesmoke;
                padding: 10px;
                width: 80%;
                color: black;
                height: 700px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Soft shadow effect */
                 box-sizing: border-box;

            /* rounded corners only */
                border-radius: 15px;

            }
            .container{
                display: flex;
                justify-content: space-between;
                gap:100px;
                padding :10px;
            }
           
             iframe {
            border: 1px solid #ccc;
            background-color: whitesmoke;
            padding: 10%;
            box-sizing: border-box;

            /* rounded corners only */
            border-radius: 15px;   /* try 10pxâ€“30px for how soft you want the edges */
            box-shadow: 0 4px 12px rgba(0,0,0,0.2); /* optional: nice soft shadow */
            }
            .uploadpannel{
                padding:18px;
            }
            .fixed-btn {
            width: 200px;          /* Fixed width */
            height: 100px;          /* Fixed height */
            background-color: whitesmoke;
            color: slateblue;
            border-radius: 8px;
            font-size: 16px;
            padding: 0;            /* Remove extra padding */
            border: 2px solid #ccc;
            cursor: pointer;
            box-sizing: border-box;
            transition: none;      /* Prevent size change on hover/focus */
        }
          
        .fixedanaa-btn {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            padding: 20px 60px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(72, 187, 120, 0.3);
            position: relative;
            overflow: hidden;
        }
        .fixed-btn:focus, .fixed-btn:active {
            outline: none;
            border: 2px solid #ccc;
        }
        .upload-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: black;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
            margin-top: 15px;
        }
        .upload-area {
            width: 500px;
            height:500px;
            border: 3px dashed #cbd5e0;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: 20px;
            color:black;
            background: linear-gradient(145deg, #f8fafc, #edf2f7);
        }
        .upload-area1 {
            width: 500px;
            height:500px;
            border: 3px dashed #cbd5e0;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            border-radius: 20px;
            background: linear-gradient(145deg, #f8fafc, #edf2f7);
        }
        .uploadtext{
           color:black;
           font-size:10px
        }
        </style>
    </head>
    <body>
        
       <div style="display: flex; justify-content: center; margin-top: 60px;"> 
        <h1>ðŸ¤– JOB AND RESUME MATCHER</h1>
       </div>

        <script>
           
            
            function clearframe(){
                var iframe= document.getElementById('Resumedisplay');

                var doc = iframe.contentDocument || iframe.contentWindow.document;
                doc.open();
                doc.write(`<html><body>No text extracted yet.</body></html>`);
                doc.close();

                

            }
            function clearframe1 (){
                var iframe1= document.getElementById('Resumedisplay1');
                var doc1 = iframe1.contentDocument || iframe1.contentWindow.document;
                doc1.open();
                doc1.write(`<html><body>No text extracted yet.</body></html>`);
                doc1.close();

            }
        </script>
        
        <div style= "display:flex; gap:80px; justify-content: space-around;">
            <form action="/uploadform" method="POST" enctype="multipart/form-data"autocomplete="off">
                <label for="resumeupload">
                    <h2>ðŸ“„  Upload your resume:</h2>
                </label>
                    
                    <div class="upload-area" id ="Resumedisplay ">
                            <textarea id="Resumedisplay" name="Resumedisplay" rows="12" cols="60" placeholder="Paste your resume here..." required onchnage="clearframe()"></textarea>

                    <div class="uploadtext">
                        <p>Drag & Drop your file here</p>
                        <p>or</p>
                        <p>Click to select a file</p>
                        <p>(Supported formats: .pdf, .docx)</p>
                    </div>
                    <button type="submit" class="upload-btn" value ="Upload form " style="color:black;"> Upload Resume</button>

                                    
                </div>
            </form>
            <form action="/uploadform1" method="POST" autocomplete="off">
                <label for="jobdesc">
                       <h2> ðŸ’¼ Paste your job description:</h2>
                    </label>
                <div class="upload-area1" id ="jobdesc-upload">
                    
                    <textarea id="jobdesc-textarea" name="jobdesc" rows="12" cols="60" placeholder="Paste your job description here..." required></textarea>
                    <div class="uploadtext" name="jobdesc">
                        <p>Paste your job description here:</p><br>

                    </div>
                    <button type="submit" class="upload-btn" value ="Submit job description"> Submit job description</button>

                </div>

            </form>
        </div>
    <div style= "display: flex; gap:40px; justify-content: space-around;">
       
            {% if extractedText %}
             <div id="Resume-display" style="border:1px solid #ccc; padding:10px; border-radius:8px; background:white;"></div>

            <script>
                
                var extractedText = {{ extractedText | tojson }};

                document.getElementById('Resume-display').innerHTML = `<pre style="white-space: pre-wrap; word-wrap: break-word;">${extractedText}</pre>`;

                </script>
                {% else %}

                {% endif %}
                {% if extracted_tt %}
                <div id="jobdesc-display" style="border:1px solid #ccc; padding:10px; border-radius:8px; background:white;"></div>

                <script>
                    var extractedTextt = {{ extracted_tt | tojson }};

                    document.getElementById('jobdesc-display').innerHTML =`<pre style="white-space: pre-wrap; word-wrap: break-word;">${extractedTextt}</pre>`;

                    </script>
                    {% else %}

                    {% endif %}

                     
                    <div style="position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);">

                        <button onclick = "analyzeMatch()" class=" fixedanaa-btn">
                                âœ¨ Analyze Match with ML
                        </button>
                     </div>
                     <div id ="results" style="display: none;  justify-content: center;  background-color: white;padding: 30px; margin:20px 0; color: black;border-radius:10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">

                        <h3>ðŸ“Š Match Analysis Results</h3> 
                        <div id = "result-content"></div>
                     </div>
                     <script>
                        async function analyzeMatch( ) {
                            try{
                                const response =await fetch('/simple_match');
                                const data = await response.json();
                                if (data.error){
                                    alert(data.error);
                                    return;
                
                                }
                                document.getElementById('results').style.display='block';
                                document.getElementById('result-content').innerHTML=`
                                <h4>ðŸŽ¯ ${data.interpretation}</h4>
                                <p><strong>Matching keywords:</strong> ${data.common_words.join(', ')}</p>
                                <p><strong>Matching percentage:</strong> ${data.match_percentage}</p>
                                <p><strong> Total Matches: </strong> ${data.total_common} out of ${data.job_word_count} job requirements</p>
                                `;
                                document.getElementById('results').scrollIntoView({behavior: 'smooth'});
                            }
                            catch(error){
                                alert('Error analyzing macth:' + error.message);
                            }            
                        }
                     </script>

        </div>
    </div>
    
    </body>
</html>     
               